<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tasador Inmobiliario Pro</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="app-header">
    <h1>Tasador Inmobiliario Pro</h1>
  </header>

  <main class="container">
    <section class="card">
      <h2>Validación de licencia</h2>
      <form id="license-form" class="form-grid">
        <label>Correo<input type="email" id="email" required></label>
        <label>Licencia<input type="text" id="licenseId" required></label>
        <button class="btn primary" type="submit">Validar</button>
      </form>
      <div id="license-status" class="status"></div>
    </section>

    <section class="card">
      <h2>Compra de licencia</h2>
      <form id="purchase-form" class="form-grid">
        <label>Nombres<input id="buyerName" required></label>
        <label>Correo<input type="email" id="buyerEmail" required></label>
        <label>Doc. tipo
          <select id="buyerDocType" required>
            <option value="DNI">DNI</option>
            <option value="CE">CE</option>
            <option value="RUC">RUC</option>
          </select>
        </label>
        <label>Doc. número<input id="buyerDocId" required></label>
        <label>Medio de pago
          <select id="payMethod" required>
            <option>Yape/Plin</option>
            <option>Transferencia</option>
            <option>Tarjeta</option>
          </select>
        </label>
        <label>Monto (S/)<input type="number" id="amount" min="1" step="0.01" required></label>
        <label>Número de operación<input type="text" id="operationNumber" required></label>
        <label>Notas<textarea id="notes" rows="2"></textarea></label>
        <button class="btn success" type="submit">Emitir licencia</button>
      </form>
      <div id="purchase-status" class="status"></div>
    </section>

    <section id="app-section" class="card hidden">
      <h2>Tasación</h2>

      <h3>Departamento</h3>
      <form id="form-depto" class="form-grid">
        <label>Distrito
          <select id="depto-distrito" required></select>
        </label>
        <label>Subzona
          <select id="depto-subzona" required disabled></select>
        </label>

        <label>Piso
          <input type="number" id="depto-piso" min="1" step="1" required>
        </label>
        <label>Ascensor
          <select id="depto-ascensor" required>
            <option value="si">Sí</option>
            <option value="no">No</option>
          </select>
        </label>

        <label>Condición
          <select id="depto-condicion" required>
            <option value="a estrenar">A estrenar</option>
            <option value="bueno">Bueno</option>
            <option value="regular">Regular</option>
            <option value="para remodelar">Para remodelar</option>
          </select>
        </label>
        <label>Dormitorios
          <input type="number" id="depto-dormitorios" min="1" step="1" required>
        </label>
        <label>Antigüedad (años)
          <input type="number" id="depto-antiguedad" min="0" step="1" required>
        </label>

        <label>Área techada (m²)
          <input type="number" id="depto-area-techada" min="0" step="0.01" required>
        </label>
        <label>Área libre (m²)
          <input type="number" id="depto-area-libre" min="0" step="0.01" required>
        </label>

        <button class="btn primary" type="submit">Calcular</button>
      </form>
      <div id="depto-result" class="result"></div>

      <h3>Casa</h3>
      <form id="form-casa" class="form-grid">
        <label>Distrito
          <select id="casa-distrito" required></select>
        </label>
        <label>Subzona
          <select id="casa-subzona" required disabled></select>
        </label>

        <label>Condición
          <select id="casa-condicion" required>
            <option value="a estrenar">A estrenar</option>
            <option value="bueno">Bueno</option>
            <option value="regular">Regular</option>
            <option value="para remodelar">Para remodelar</option>
          </select>
        </label>
        <label>Dormitorios
          <input type="number" id="casa-dormitorios" min="1" step="1" required>
        </label>
        <label>Antigüedad (años)
          <input type="number" id="casa-antiguedad" min="0" step="1" required>
        </label>

        <label>Área techada (m²)
          <input type="number" id="casa-area-techada" min="0" step="0.01" required>
        </label>
        <label>Área libre (m²)
          <input type="number" id="casa-area-libre" min="0" step="0.01" required>
        </label>

        <button class="btn primary" type="submit">Calcular</button>
      </form>
      <div id="casa-result" class="result"></div>

      <h3>Terreno</h3>
      <form id="form-terreno" class="form-grid">
        <label>Distrito
          <select id="terreno-distrito" required></select>
        </label>
        <label>Subzona
          <select id="terreno-subzona" required disabled></select>
        </label>
        <label>Área (m²)
          <input type="number" id="terreno-area" min="0" step="0.01" required>
        </label>
        <button class="btn primary" type="submit">Calcular</button>
      </form>
      <div id="terreno-result" class="result"></div>
    </section>

    <section class="card">
      <h2>Prueba rápida issue</h2>
      <button id="emitir-btn" class="btn primary">Emitir prueba (S/100)</button>
      <pre id="emitir-out"></pre>
    </section>
  </main>

  <script src="script.js"></script>
  <script>
    document.getElementById('emitir-btn').onclick = async () => {
      if (!window.emitirLicencia) return alert('Función no cargada');
      const res = await window.emitirLicencia();
      document.getElementById('emitir-out').textContent = JSON.stringify(res, null, 2);
    };
  </script>
</body>
</html>








